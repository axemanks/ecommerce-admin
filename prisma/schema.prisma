// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider     = "mysql"
  url          = env("DATABASE_URL")
  relationMode = "prisma"
}

// model of the store
model Store {
  id     String @id @default(uuid())
  name   String
  userId String
  billboards Billboard[] @relation("StoreToBillboard") // relation to billboards
  categories Category[] @relation("StoreToCategory") // relation to categories
  sizes Size[] @relation("StoreToSize") // relation to size
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Model for bilboards - storeId field in the Billboard model is used to link each Billboard to a Store via the Store's id.
model Billboard {
  id String @id @default(uuid())
  storeId String
  store Store @relation("StoreToBillboard", fields: [storeId], references: [id]) // relation to store
  label String
  imageUrl String
  categories Category[] // relation to categories
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([storeId]) // Create Index - Indexes are used to speed up the performance of database operations. By creating an index on the storeId field, any operations that involve searching for billboards by storeId will be faster.
}

// Model for category
model Category {
  id String @id @default(uuid())
  storeId String
  store Store @relation("StoreToCategory", fields: [storeId], references: [id]) // relation to store
  billboardId String
  billboard Billboard @relation(fields: [billboardId], references: [id]) // relation to billboard
  name String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([storeId])
  @@index([billboardId])
}
// Sizes
model Size {
  id String @id @default(uuid())
  storeId String
  store Store @relation("StoreToSize", fields: [storeId], references: [id]) // relation to store
  name String
  value String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([storeId])
}